<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="stjohn.css?v=9.11.2024">
    <meta name="description" content="Login page for St. John of the Ladder: An Intro to Orthodoxy Game.">
    <title>St. John of the Ladder: An Intro to Orthodoxy Game</title>
</head>
<body>
    <div id="site-container" class="columns">
        <div class="login-page" id="login-page">
            <div id="splash-container">
                <div id="title-info">
                    <h1 id="game-title">St. John Of The Ladder</h1>
                    <h2 id="game-subtitle">An Intro To Orthodoxy Game</h2>
                </div>
                <div id="name-entry" aria-describedby="username-instructions">
                    <label for="username" class="visually-hidden">Enter your name</label>
                    <input 
                        class="pixel-text-box" 
                        type="text" 
                        autofocus 
                        id="username" 
                        placeholder="Enter your name..." 
                        maxlength="10" 
                        oninput="checkLength(this)" 
                        onkeydown="checkEnter(event)" 
                        aria-required="true" 
                    />
                    <p id="username-instructions" class="aria-notice">Name input is limited to 10 characters. Press Enter to login or click "Climb the Ladder."</p>
                    <div id="max-message" role="alert" aria-live="polite"></div>
                    <button 
                        id="login" 
                        class="pixel-text-box" 
                        value="Login" 
                        onclick="login()" 
                        aria-label="Login and climb the ladder">
                        Climb The Ladder
                    </button>
                </div>
                <div id="visit-container">
                    <button 
                        id="visit" 
                        class="visit red-bg pixel-text-box" 
                        aria-label="Visit a Church Near You">
                        Visit a Church Near You
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        function checkEnter(event) {
            if (event.key === 'Enter') {
                login();
            }
        }

        function login() {
            var usernameInput = document.getElementById('username');
            var username = usernameInput.value.trim();

            if (!username) {
                username = "Pilgrim";
                usernameInput.value = username;
            }

            sessionStorage.setItem('username', username);

            // Redirect to the main game URL
            window.location.href = 'index.html'; 
        }

        function checkLength(input) {
            var maxLength = 10;
            var currentLength = input.value.length;

            var messageElement = document.getElementById('max-message');
            if (currentLength >= maxLength) {
                messageElement.textContent = 'Max reached';
            } else {
                messageElement.textContent = '';
            }
        }

        document.getElementById('visit').addEventListener('click', function() {
            window.open('https://orthodoxyinamerica.org', '_blank');
        });
    </script>
    <script src="stjohn.js"></script>
</body>
</html>
